# Quick Start Guide

## Local Development

### 1. Install Dependencies

```bash
# Install backend dependencies
cd backend
npm install

# Install frontend dependencies
cd ../frontend
npm install
```

### 2. Run the App

**Option A: File-based Storage (Simplest)**

```bash
# Terminal 1 - Backend
cd backend
npm run dev

# Terminal 2 - Frontend
cd frontend
npm run dev
```

Open http://localhost:5173

**Option B: With Firestore Emulator**

```bash
# Install Firebase CLI (one-time)
npm install -g firebase-tools

# Start Firestore emulator
firebase emulators:start --only firestore

# In backend/.env
USE_FIRESTORE=true
FIRESTORE_EMULATOR_HOST=localhost:8080

# Terminal 1 - Backend
cd backend
npm run dev

# Terminal 2 - Frontend
cd frontend
npm run dev
```

## Deploy to Google Cloud

### Quick Deploy (5 minutes)

```bash
# 1. Set your project
gcloud config set project YOUR_PROJECT_ID

# 2. Enable APIs
gcloud services enable run.googleapis.com cloudbuild.googleapis.com firestore.googleapis.com

# 3. Create Firestore database (do this in console first)
# Go to https://console.cloud.google.com/firestore
# Select Native Mode, location: us-central1

# 4. Build and deploy
gcloud builds submit --tag gcr.io/YOUR_PROJECT_ID/fooder-app

gcloud run deploy fooder-app \
  --image gcr.io/YOUR_PROJECT_ID/fooder-app \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars USE_FIRESTORE=true,NODE_ENV=production,JWT_SECRET=$(openssl rand -base64 32)
```

### Auto-Deploy from GitHub

```bash
# 1. Push to GitHub
git add .
git commit -m "Initial commit"
git push origin main

# 2. Set up Cloud Build trigger (in GCP Console)
# Go to https://console.cloud.google.com/cloud-build/triggers
# Connect your GitHub repo
# Create trigger pointing to cloudbuild.yaml

# 3. Every push to main will auto-deploy!
```

## Environment Variables

### Backend (.env)

```bash
# Development (file storage)
PORT=3000
NODE_ENV=development
JWT_SECRET=your-secret-key
FRONTEND_URL=http://localhost:5173

# Development (with Firestore emulator)
USE_FIRESTORE=true
FIRESTORE_EMULATOR_HOST=localhost:8080
GCP_PROJECT_ID=your-project-id

# Production (set in Cloud Run)
USE_FIRESTORE=true
NODE_ENV=production
JWT_SECRET=<auto-generated>
```

### Frontend (.env)

```bash
# Development
VITE_API_BASE_URL=http://localhost:3000

# Production (leave empty)
VITE_API_BASE_URL=
```

## Common Commands

```bash
# Build everything
cd backend && npm run build

# Run tests (when added)
npm test

# Check TypeScript errors
cd backend && npx tsc --noEmit
cd frontend && npx tsc --noEmit

# View Cloud Run logs
gcloud run services logs tail fooder-app --region us-central1

# View Firestore data
# Go to https://console.cloud.google.com/firestore
```

## Troubleshooting

### Port already in use
```bash
# Change PORT in backend/.env
PORT=3001
```

### Can't connect to backend
```bash
# Check VITE_API_BASE_URL in frontend/.env
VITE_API_BASE_URL=http://localhost:3000
```

### Firestore permission errors
```bash
# Make sure you're authenticated
gcloud auth application-default login
```

## Next Steps

- Read [GCP_DEPLOYMENT.md](./GCP_DEPLOYMENT.md) for detailed deployment guide
- Read [README.md](./README.md) for full documentation
- Check out the specs in `.kiro/specs/` for feature details
